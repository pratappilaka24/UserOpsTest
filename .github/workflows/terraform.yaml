name: User Ops Sample

on:
  workflow_dispatch:
    inputs:
      firstname:
        description: 'First name'     
        required: true
        
      lastname:
        description: 'Last name'     
        required: true
        

jobs:
  add-user-to-confluence:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Add user to Confluence
      run: |
        curl -X POST \
          --header "Content-Type: application/json" \
          --user '${{ secrets.CONFLUENCE_USER }}:${{ secrets.CONFLUENCE_API_TOKEN }}' \
          --url ${{ secrets.CONFLUENCE_URL }}/wiki/api/v2/user/access/invite-by-email \
          --data '{"emails": ["pratapreddyb4u@gmail.com"]}'
